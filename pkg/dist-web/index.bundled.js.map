{"version":3,"file":"index.bundled.js","sources":["index.js","../../node_modules/construct-style-sheets-polyfill/dist/adoptedStyleSheets.js"],"sourcesContent":["import 'construct-style-sheets-polyfill';\n\n/**\n * Converts a snake-case string to camelCase\n *\n * @param {string} str kebab-cased string\n * @returns {string} camelCased string\n */\n\nfunction kebabToCamelCase(str) {\n  return str.replace(/(-)([a-z])/g, g => g[1].toUpperCase());\n}\n/**\n * Converts a camelCase string to kebab-case\n *\n * @param {string} str camelCased string\n * @returns {string} kebab-cased string\n */\n\n\nfunction camelToKebabCase(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Takes attributes from element and creates an object\n * with the keys camelCased.\n *\n * @param {NamedNodeMap} attributes Element.attributes\n * @returns {object} Object with camelCased keys\n */\n\n\nfunction attributesToObject(attributes) {\n  return attributes ? Array.from(attributes).reduce((cur, {\n    localName,\n    value\n  }) => ({ ...cur,\n    [kebabToCamelCase(localName)]: value\n  }), {}) : {};\n}\n/**\n * Converts a string of HTML into nodes.\n *\n * @param {string} string HTML in string form\n * @returns {Node[]} Nodes parsed from the HTML string\n */\n\n\nfunction stringToElements(string) {\n  const fragment = document.createRange().createContextualFragment(string);\n  return [...fragment.children];\n}\n/**\n * Takes a class for an extended Component/HTMLElement\n * and registes it basedof the ClassName as class-name.\n *\n * @param {Function} classInstace Instance of a custom element to register\n * @returns {string} the kebab-case version fo ClassName\n */\n\nfunction registerComponent(classInstace) {\n  // @ts-ignore\n  const componentName = 'is' in classInstace ? classInstace.is : classInstace.prototype.constructor.name;\n  const kebabName = camelToKebabCase(componentName);\n  customElements.define(kebabName, classInstace);\n  return kebabName;\n}\nconst ComponentCache = {};\nconst CSSCache = {};\nclass Component extends HTMLElement {\n  constructor(componentPath) {\n    super();\n\n    if (componentPath) {\n      this.componentPath = componentPath;\n    } else {\n      console.warn('You did not send a path to the super method in your constructor. Thus CSS and HTML cannot be read for this component.', this);\n      console.warn('If shipping for modern browser, then call super with import.meta.url. If not, specify a path that is similar to import.meta.url yourself.');\n      console.warn('Should be the path to the component you are making.');\n    }\n  }\n\n  $(q) {\n    return this._sDOM.querySelector(q);\n  }\n\n  set state(updates) {\n    this._state = Object.freeze({ ...(this._state || {}),\n      ...updates\n    }); // @ts-ignore\n\n    if (this.render) {\n      this._render();\n    }\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  get cssPath() {\n    return this.componentPath && this.componentPath.replace(/\\.js/gi, '.css');\n  }\n\n  get htmlPath() {\n    return this.componentPath.replace(/\\.js/gi, '.html');\n  }\n\n  get props() {\n    return attributesToObject(this.attributes);\n  }\n  /**\n   * Fetch sibling CSS if componentPath was sent in the super call.\n   * Execute the render method of the component and return the result as a node\n   *\n   * @returns {Promise<Node>}\n   */\n\n\n  async _render() {\n    const docFrag = new DocumentFragment();\n    const cssText = CSSCache[this.cssPath];\n\n    if (!cssText && this.cssPath) {\n      const sheet = await this.fetchCSSAsStyleSheet(); // @ts-ignore\n\n      this._sDOM.adoptedStyleSheets = [sheet];\n    } // @ts-ignore\n\n\n    const htmlText = this.render(this.props);\n    stringToElements(htmlText).forEach(c => docFrag.appendChild(c));\n    return docFrag.cloneNode(true);\n  }\n\n  async fetchHTMLAsDocFrag() {\n    const docFrag = new DocumentFragment();\n    const response = await fetch(this.htmlPath);\n\n    if (response.ok) {\n      const text = await response.text();\n      stringToElements(text).forEach(c => docFrag.appendChild(c));\n    }\n\n    return docFrag;\n  }\n\n  async fetchCSSAsStyleSheet() {\n    const sheet = new CSSStyleSheet();\n    const response = await fetch(this.cssPath);\n\n    if (response.ok && response.headers.get('content-type').indexOf('text/css') !== -1) {\n      const text = await response.text(); // @ts-ignore\n\n      await sheet.replace(text);\n    }\n\n    return sheet;\n  }\n  /**\n   * Fetch sibling CSS and HTML if componentPath was sent in the super call.\n   * If these has already been fetched (a component is initied more than one)\n   * then re-use the cached document fragment instead of fethcing again.\n   *\n   * @returns {Promise<Node>}\n   */\n\n\n  async _renderHTMLFile() {\n    const componentId = btoa(this.componentPath);\n\n    if (!ComponentCache[componentId]) {\n      ComponentCache[componentId] = Promise.all([this.fetchHTMLAsDocFrag(), this.fetchCSSAsStyleSheet()]);\n    }\n\n    const [docFrag, sheet] = await ComponentCache[componentId]; // @ts-ignore\n\n    this._sDOM.adoptedStyleSheets = [sheet];\n    return docFrag.cloneNode(true);\n  } // Kinda like Reacts componentDidUpdate\n\n\n  componentDidUpdate() {} // Kinda like Reacts componentDidMount\n\n\n  componentDidMount() {}\n\n  async attributeChangedCallback() {\n    let content; // @ts-ignore\n\n    if (this.render) {\n      content = await this._render();\n    } else {\n      content = await this._renderHTMLFile();\n    }\n\n    this._sDOM.innerHTML = null;\n\n    this._sDOM.appendChild(content);\n\n    if (this.componentDidUpdate) {\n      this.componentDidUpdate();\n    }\n  }\n\n  async connectedCallback() {\n    this._sDOM = this.attachShadow({\n      mode: 'closed'\n    });\n    let content; // @ts-ignore\n\n    if (this.render) {\n      content = await this._render();\n    } else {\n      content = await this._renderHTMLFile();\n    }\n\n    this._sDOM.innerHTML = null;\n\n    this._sDOM.appendChild(content);\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        if (this.componentDidMount) {\n          this.componentDidMount();\n        }\n      });\n    });\n  }\n\n}\n\nexport { Component, registerComponent, stringToElements };\n//# sourceMappingURL=index.js.map\n","(function () {\n  'use strict';\n\n  if ('adoptedStyleSheets' in document) { return; }\n\n  var hasShadyCss = 'ShadyCSS' in window && !window.ShadyCSS.nativeShadow;\n  var deferredStyleSheets = [];\n  var deferredDocumentStyleElements = [];\n  var adoptedSheetsRegistry = new WeakMap();\n  var sheetMetadataRegistry = new WeakMap();\n  var locationRegistry = new WeakMap();\n  var observerRegistry = new WeakMap();\n  var appliedActionsCursorRegistry = new WeakMap();\n  var state = {\n    loaded: false\n  };\n  var frame = {\n    body: null,\n    CSSStyleSheet: null\n  };\n  var OldCSSStyleSheet = CSSStyleSheet;\n\n  function instanceOfStyleSheet(instance) {\n    return instance instanceof OldCSSStyleSheet || instance instanceof frame.CSSStyleSheet;\n  }\n  function checkAndPrepare(sheets, container) {\n    var locationType = container === document ? 'Document' : 'ShadowRoot';\n    if (!Array.isArray(sheets)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Iterator getter is not callable.\");\n    }\n    if (!sheets.every(instanceOfStyleSheet)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Failed to convert value to 'CSSStyleSheet'\");\n    }\n    var uniqueSheets = sheets.filter(function (value, index) {\n      return sheets.indexOf(value) === index;\n    });\n    adoptedSheetsRegistry.set(container, uniqueSheets);\n    return uniqueSheets;\n  }\n  function isDocumentLoading() {\n    return document.readyState === 'loading';\n  }\n  function getAdoptedStyleSheet(location) {\n    return adoptedSheetsRegistry.get(location.parentNode === document.documentElement ? document : location);\n  }\n\n  var importPattern = /@import/;\n  var cssStyleSheetMethods = ['addImport', 'addPageRule', 'addRule', 'deleteRule', 'insertRule', 'removeImport', 'removeRule'];\n  var cssStyleSheetNewMethods = ['replace', 'replaceSync'];\n  function updatePrototype(proto) {\n    cssStyleSheetNewMethods.forEach(function (methodKey) {\n      proto[methodKey] = function () {\n        return ConstructStyleSheet.prototype[methodKey].apply(this, arguments);\n      };\n    });\n    cssStyleSheetMethods.forEach(function (methodKey) {\n      var oldMethod = proto[methodKey];\n      proto[methodKey] = function () {\n        var args = arguments;\n        var result = oldMethod.apply(this, args);\n        if (sheetMetadataRegistry.has(this)) {\n          var _sheetMetadataRegistr = sheetMetadataRegistry.get(this),\n              adopters = _sheetMetadataRegistr.adopters,\n              actions = _sheetMetadataRegistr.actions;\n          adopters.forEach(function (styleElement) {\n            if (styleElement.sheet) {\n              styleElement.sheet[methodKey].apply(styleElement.sheet, args);\n            }\n          });\n          actions.push([methodKey, args]);\n        }\n        return result;\n      };\n    });\n  }\n  function updateAdopters(sheet) {\n    var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(sheet),\n        adopters = _sheetMetadataRegistr2.adopters,\n        basicStyleElement = _sheetMetadataRegistr2.basicStyleElement;\n    adopters.forEach(function (styleElement) {\n      styleElement.innerHTML = basicStyleElement.innerHTML;\n    });\n  }\n  var ConstructStyleSheet =\n  function () {\n    function ConstructStyleSheet() {\n      var basicStyleElement = document.createElement('style');\n      if (state.loaded) {\n        frame.body.appendChild(basicStyleElement);\n      } else {\n        document.head.appendChild(basicStyleElement);\n        basicStyleElement.disabled = true;\n        deferredStyleSheets.push(basicStyleElement);\n      }\n      var nativeStyleSheet = basicStyleElement.sheet;\n      sheetMetadataRegistry.set(nativeStyleSheet, {\n        adopters: new Map(),\n        actions: [],\n        basicStyleElement: basicStyleElement\n      });\n      return nativeStyleSheet;\n    }\n    var _proto = ConstructStyleSheet.prototype;\n    _proto.replace = function replace(contents) {\n      var _this = this;\n      return new Promise(function (resolve, reject) {\n        if (sheetMetadataRegistry.has(_this)) {\n          var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(_this),\n              basicStyleElement = _sheetMetadataRegistr3.basicStyleElement;\n          basicStyleElement.innerHTML = contents;\n          resolve(basicStyleElement.sheet);\n          updateAdopters(_this);\n        } else {\n          reject(new Error(\"Failed to execute 'replace' on 'CSSStyleSheet': Can't call replace on non-constructed CSSStyleSheets.\"));\n        }\n      });\n    };\n    _proto.replaceSync = function replaceSync(contents) {\n      if (importPattern.test(contents)) {\n        throw new Error('@import rules are not allowed when creating stylesheet synchronously');\n      }\n      if (sheetMetadataRegistry.has(this)) {\n        var _sheetMetadataRegistr4 = sheetMetadataRegistry.get(this),\n            basicStyleElement = _sheetMetadataRegistr4.basicStyleElement;\n        basicStyleElement.innerHTML = contents;\n        updateAdopters(this);\n        return basicStyleElement.sheet;\n      } else {\n        throw new Error(\"Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.\");\n      }\n    };\n    return ConstructStyleSheet;\n  }();\n  Object.defineProperty(ConstructStyleSheet, Symbol.hasInstance, {\n    configurable: true,\n    value: instanceOfStyleSheet\n  });\n\n  function adoptStyleSheets(location) {\n    var newStyles = document.createDocumentFragment();\n    var sheets = getAdoptedStyleSheet(location);\n    var observer = observerRegistry.get(location);\n    for (var i = 0, len = sheets.length; i < len; i++) {\n      var _sheetMetadataRegistr = sheetMetadataRegistry.get(sheets[i]),\n          adopters = _sheetMetadataRegistr.adopters,\n          basicStyleElement = _sheetMetadataRegistr.basicStyleElement;\n      var elementToAdopt = adopters.get(location);\n      if (elementToAdopt) {\n        observer.disconnect();\n        newStyles.appendChild(elementToAdopt);\n        if (!elementToAdopt.innerHTML || elementToAdopt.sheet && !elementToAdopt.sheet.cssText) {\n          elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        }\n        observer.observe();\n      } else {\n        elementToAdopt = document.createElement('style');\n        elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        locationRegistry.set(elementToAdopt, location);\n        appliedActionsCursorRegistry.set(elementToAdopt, 0);\n        adopters.set(location, elementToAdopt);\n        newStyles.appendChild(elementToAdopt);\n      }\n      if (location === document.head) {\n        deferredDocumentStyleElements.push(elementToAdopt);\n      }\n    }\n    location.insertBefore(newStyles, location.lastChild);\n    for (var _i = 0, _len = sheets.length; _i < _len; _i++) {\n      var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(sheets[_i]),\n          _adopters = _sheetMetadataRegistr2.adopters,\n          actions = _sheetMetadataRegistr2.actions;\n      var adoptedStyleElement = _adopters.get(location);\n      var cursor = appliedActionsCursorRegistry.get(adoptedStyleElement);\n      if (actions.length > 0) {\n        for (var _i2 = cursor, _len2 = actions.length; _i2 < _len2; _i2++) {\n          var _actions$_i = actions[_i2],\n              key = _actions$_i[0],\n              args = _actions$_i[1];\n          adoptedStyleElement.sheet[key].apply(adoptedStyleElement.sheet, args);\n        }\n        appliedActionsCursorRegistry.set(adoptedStyleElement, actions.length - 1);\n      }\n    }\n  }\n  function removeExcludedStyleSheets(location, oldSheets) {\n    var sheets = getAdoptedStyleSheet(location);\n    for (var i = 0, len = oldSheets.length; i < len; i++) {\n      if (sheets.indexOf(oldSheets[i]) > -1) {\n        return;\n      }\n      var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(oldSheets[i]),\n          adopters = _sheetMetadataRegistr3.adopters;\n      var observer = observerRegistry.get(location);\n      var styleElement = adopters.get(location);\n      observer.disconnect();\n      styleElement.parentNode.removeChild(styleElement);\n      observer.observe();\n    }\n  }\n\n  function adoptAndRestoreStylesOnMutationCallback(mutations) {\n    for (var i = 0, len = mutations.length; i < len; i++) {\n      var _mutations$i = mutations[i],\n          addedNodes = _mutations$i.addedNodes,\n          removedNodes = _mutations$i.removedNodes;\n      for (var _i = 0, _len = removedNodes.length; _i < _len; _i++) {\n        var location = locationRegistry.get(removedNodes[_i]);\n        if (location) {\n          adoptStyleSheets(location);\n        }\n      }\n      if (!hasShadyCss) {\n        for (var _i2 = 0, _len2 = addedNodes.length; _i2 < _len2; _i2++) {\n          var iter = document.createNodeIterator(addedNodes[_i2], NodeFilter.SHOW_ELEMENT, function (node) {\n            return node.shadowRoot && node.shadowRoot.adoptedStyleSheets.length > 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;\n          },\n          null, false);\n          var node = void 0;\n          while (node = iter.nextNode()) {\n            adoptStyleSheets(node.shadowRoot);\n          }\n        }\n      }\n    }\n  }\n  function createObserver(location) {\n    var observer = new MutationObserver(adoptAndRestoreStylesOnMutationCallback);\n    var observerTool = {\n      observe: function observe() {\n        observer.observe(location, {\n          childList: true,\n          subtree: true\n        });\n      },\n      disconnect: function disconnect() {\n        observer.disconnect();\n      }\n    };\n    observerRegistry.set(location, observerTool);\n    observerTool.observe();\n  }\n\n  function initPolyfill() {\n    var iframe = document.createElement('iframe');\n    iframe.hidden = true;\n    document.body.appendChild(iframe);\n    frame.body = iframe.contentWindow.document.body;\n    frame.CSSStyleSheet = iframe.contentWindow.CSSStyleSheet;\n    updatePrototype(iframe.contentWindow.CSSStyleSheet.prototype);\n    createObserver(document.body);\n    state.loaded = true;\n    var fragment = document.createDocumentFragment();\n    for (var i = 0, len = deferredStyleSheets.length; i < len; i++) {\n      deferredStyleSheets[i].disabled = false;\n      fragment.appendChild(deferredStyleSheets[i]);\n    }\n    frame.body.appendChild(fragment);\n    for (var _i = 0, _len = deferredDocumentStyleElements.length; _i < _len; _i++) {\n      fragment.appendChild(deferredDocumentStyleElements[_i]);\n    }\n    document.body.insertBefore(fragment, document.body.firstChild);\n    deferredStyleSheets.length = 0;\n    deferredDocumentStyleElements.length = 0;\n  }\n  function initAdoptedStyleSheets() {\n    var adoptedStyleSheetAccessors = {\n      configurable: true,\n      get: function get() {\n        return adoptedSheetsRegistry.get(this) || [];\n      },\n      set: function set(sheets) {\n        var oldSheets = adoptedSheetsRegistry.get(this) || [];\n        checkAndPrepare(sheets, this);\n        var location = this === document ?\n        isDocumentLoading() ? this.head : this.body : this;\n        var isConnected = 'isConnected' in location ? location.isConnected : document.body.contains(location);\n        if (isConnected) {\n          adoptStyleSheets(location);\n          removeExcludedStyleSheets(location, oldSheets);\n        }\n      }\n    };\n    Object.defineProperty(Document.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    if (typeof ShadowRoot !== 'undefined') {\n      var attachShadow = HTMLElement.prototype.attachShadow;\n      HTMLElement.prototype.attachShadow = function () {\n        var location = hasShadyCss ? this : attachShadow.apply(this, arguments);\n        createObserver(location);\n        return location;\n      };\n      Object.defineProperty(ShadowRoot.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    }\n  }\n\n  updatePrototype(OldCSSStyleSheet.prototype);\n  window.CSSStyleSheet = ConstructStyleSheet;\n  initAdoptedStyleSheets();\n  if (isDocumentLoading()) {\n    document.addEventListener('DOMContentLoaded', initPolyfill);\n  } else {\n    initPolyfill();\n  }\n\n}());\n"],"names":["stringToElements","string","document","createRange","createContextualFragment","children","registerComponent","classInstace","componentName","is","prototype","constructor","name","kebabName","replace","toLowerCase","customElements","define","hasShadyCss","window","ShadyCSS","nativeShadow","deferredStyleSheets","deferredDocumentStyleElements","adoptedSheetsRegistry","WeakMap","sheetMetadataRegistry","locationRegistry","observerRegistry","appliedActionsCursorRegistry","state","loaded","frame","body","CSSStyleSheet","OldCSSStyleSheet","importPattern","cssStyleSheetMethods","cssStyleSheetNewMethods","ConstructStyleSheet","basicStyleElement","createElement","appendChild","head","disabled","push","nativeStyleSheet","sheet","set","adopters","Map","actions","_proto","contents","_this","this","Promise","resolve","reject","has","get","innerHTML","updateAdopters","Error","replaceSync","test","Object","defineProperty","Symbol","hasInstance","configurable","value","instanceOfStyleSheet","updatePrototype","adoptedStyleSheetAccessors","sheets","oldSheets","container","locationType","Array","isArray","TypeError","every","uniqueSheets","filter","index","indexOf","checkAndPrepare","location","isDocumentLoading","isConnected","contains","adoptStyleSheets","getAdoptedStyleSheet","i","len","length","observer","styleElement","disconnect","parentNode","removeChild","observe","removeExcludedStyleSheets","Document","ShadowRoot","attachShadow","HTMLElement","apply","arguments","createObserver","initAdoptedStyleSheets","addEventListener","initPolyfill","instance","readyState","documentElement","proto","forEach","methodKey","oldMethod","args","result","_sheetMetadataRegistr","_sheetMetadataRegistr2","newStyles","createDocumentFragment","elementToAdopt","cssText","insertBefore","lastChild","_i","_len","_adopters","adoptedStyleElement","cursor","_i2","_len2","_actions$_i","key","adoptAndRestoreStylesOnMutationCallback","mutations","_mutations$i","addedNodes","removedNodes","iter","createNodeIterator","NodeFilter","SHOW_ELEMENT","node","shadowRoot","adoptedStyleSheets","FILTER_ACCEPT","FILTER_REJECT","nextNode","MutationObserver","observerTool","childList","subtree","iframe","hidden","contentWindow","fragment","firstChild","ComponentCache","CSSCache","Component","[object Object]","componentPath","console","warn","q","_sDOM","querySelector","updates","_state","freeze","render","_render","attributes","from","reduce","cur","str","localName","g","toUpperCase","docFrag","DocumentFragment","cssPath","fetchCSSAsStyleSheet","props","c","cloneNode","response","fetch","_this2","htmlPath","ok","text","_this3","headers","componentId","btoa","_this4","all","fetchHTMLAsDocFrag","content","_this5","_renderHTMLFile","componentDidUpdate","_this6","mode","requestAnimationFrame","componentDidMount"],"mappings":"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"}