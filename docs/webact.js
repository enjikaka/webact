(function(){"use strict";if("adoptedStyleSheets"in document)return;var a="ShadyCSS"in window&&!window.ShadyCSS.nativeShadow,r=[],c=[],n=new WeakMap,e=new WeakMap,l=new WeakMap,m=new WeakMap,g=new WeakMap,y={loaded:!1},v={body:null,CSSStyleSheet:null},U=CSSStyleSheet,ee=/@import\surl(.*?);/gi;function W(t){return t instanceof U||t instanceof v.CSSStyleSheet}function te(t,s){var o=s===document?"Document":"ShadowRoot";if(!Array.isArray(t))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+o+": Iterator getter is not callable.");if(!t.every(W))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+o+": Failed to convert value to 'CSSStyleSheet'");var i=t.filter(function(h,d){return t.indexOf(h)===d});return n.set(s,i),i}function I(){return document.readyState==="loading"}function $(t){return n.get(t.parentNode===document.documentElement?document:t)}function z(t){var s=t.match(ee,"")||[],o=t;return s.length&&(console.warn("@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418"),s.forEach(function(i){o=o.replace(i,"")})),o}var ne=["addImport","addPageRule","addRule","deleteRule","insertRule","removeImport","removeRule"],re=["replace","replaceSync"];function B(t){re.forEach(function(s){t[s]=function(){return O.prototype[s].apply(this,arguments)}}),ne.forEach(function(s){var o=t[s];t[s]=function(){var i=arguments,h=o.apply(this,i);if(e.has(this)){var d=e.get(this),p=d.adopters,S=d.actions;p.forEach(function(f){f.sheet&&f.sheet[s].apply(f.sheet,i)}),S.push([s,i])}return h}})}function G(t){var s=e.get(t),o=s.adopters,i=s.basicStyleElement;o.forEach(function(h){h.innerHTML=i.innerHTML})}var O=function(){function t(){var o=document.createElement("style");y.loaded?v.body.appendChild(o):(document.head.appendChild(o),o.disabled=!0,r.push(o));var i=o.sheet;return e.set(i,{adopters:new Map,actions:[],basicStyleElement:o}),i}var s=t.prototype;return s.replace=function(i){var h=this,d=z(i);return new Promise(function(p,S){if(e.has(h)){var f=e.get(h),u=f.basicStyleElement;u.innerHTML=d,p(u.sheet),G(h)}else S(new Error("Can't call replace on non-constructed CSSStyleSheets."))})},s.replaceSync=function(i){var h=z(i);if(e.has(this)){var d=e.get(this),p=d.basicStyleElement;return p.innerHTML=h,G(this),p.sheet}else throw new Error("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")},t}();Object.defineProperty(O,Symbol.hasInstance,{configurable:!0,value:W});function R(t){for(var s=document.createDocumentFragment(),o=$(t),i=m.get(t),h=0,d=o.length;h<d;h++){var p=e.get(o[h]),S=p.adopters,f=p.basicStyleElement,u=S.get(t);u?(i.disconnect(),s.appendChild(u),(!u.innerHTML||u.sheet&&!u.sheet.cssText)&&(u.innerHTML=f.innerHTML),i.observe()):(u=document.createElement("style"),u.innerHTML=f.innerHTML,l.set(u,t),g.set(u,0),S.set(t,u),s.appendChild(u)),t===document.head&&c.push(u)}t.insertBefore(s,t.firstChild);for(var w=0,D=o.length;w<D;w++){var C=e.get(o[w]),_=C.adopters,b=C.actions,E=_.get(t),ae=g.get(E);if(b.length>0){for(var A=ae,ce=b.length;A<ce;A++){var Z=b[A],he=Z[0],de=Z[1];E.sheet[he].apply(E.sheet,de)}g.set(E,b.length-1)}}}function se(t,s){for(var o=$(t),i=0,h=s.length;i<h;i++)if(!(o.indexOf(s[i])>-1)){var d=e.get(s[i]),p=d.adopters,S=m.get(t),f=p.get(t);f||(f=p.get(document.head)),S.disconnect(),f.parentNode.removeChild(f),S.observe()}}function oe(t){for(var s=0,o=t.length;s<o;s++){for(var i=t[s],h=i.addedNodes,d=i.removedNodes,p=0,S=d.length;p<S;p++){var f=l.get(d[p]);f&&R(f)}if(!a)for(var u=0,w=h.length;u<w;u++)for(var D=document.createNodeIterator(h[u],NodeFilter.SHOW_ELEMENT,function(_){return _.shadowRoot&&_.shadowRoot.adoptedStyleSheets.length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},null,!1),C=void 0;C=D.nextNode();)R(C.shadowRoot)}}function J(t){var s=new MutationObserver(oe),o={observe:function(){s.observe(t,{childList:!0,subtree:!0})},disconnect:function(){s.disconnect()}};m.set(t,o),o.observe()}function Y(){var t=document.createElement("iframe");t.hidden=!0,document.body.appendChild(t),v.body=t.contentWindow.document.body,v.CSSStyleSheet=t.contentWindow.CSSStyleSheet,B(t.contentWindow.CSSStyleSheet.prototype),J(document.body),y.loaded=!0;for(var s=document.createDocumentFragment(),o=0,i=r.length;o<i;o++)r[o].disabled=!1,s.appendChild(r[o]);v.body.appendChild(s);for(var h=0,d=c.length;h<d;h++)s.appendChild(c[h]);document.body.insertBefore(s,document.body.firstChild),r.length=0,c.length=0}function ie(){var t={configurable:!0,get:function(){return n.get(this)||[]},set:function(i){var h=n.get(this)||[];te(i,this);var d=this===document?I()?this.head:this.body:this,p="isConnected"in d?d.isConnected:document.body.contains(d);window.requestAnimationFrame(function(){p&&(R(d),se(d,h))})}};if(Object.defineProperty(Document.prototype,"adoptedStyleSheets",t),typeof ShadowRoot!="undefined"){var s=Element.prototype.attachShadow;Element.prototype.attachShadow=function(){var o=a?this:s.apply(this,arguments);return J(o),o},Object.defineProperty(ShadowRoot.prototype,"adoptedStyleSheets",t)}}B(U.prototype),window.CSSStyleSheet=O,ie(),I()?document.addEventListener("DOMContentLoaded",Y):Y()})();function ue(a){return a.replace(/(-)([a-z])/g,r=>r[1].toUpperCase())}function F(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function M(a){return a?Array.from(a).reduce((r,{localName:c,value:n})=>({...r,[ue(c)]:n}),{}):{}}function x(a){return document.createRange().createContextualFragment(a)}function Q(a,...r){let c=Array.isArray(a)?a.reduce((e,l,m)=>e+(r[m]?l+r[m]:l),""):a,n=new CSSStyleSheet;return n.replace(c),n}function V(a,...r){let c=Array.isArray(a)?a.reduce((n,e,l)=>n+(r[l]?e+r[l]:e),""):a;return x(c)}var H={},le={},X=class extends HTMLElement{constructor(r){super();r?this.componentPath=r:(console.warn("You did not send a path to the super method in your constructor. Thus CSS and HTML cannot be read for this component.",this),console.warn("If shipping for modern browser, then call super with import.meta.url. If not, specify a path that is similar to import.meta.url yourself."),console.warn("Should be the path to the component you are making."))}$(r){return this._sDOM.querySelector(r)}get cssPath(){return this.componentPath&&this.componentPath.replace(/\.(html|js)/gi,".css")}get htmlPath(){return this.componentPath&&this.componentPath.replace(/\.(css|js)/gi,".html")}get props(){return M(this.attributes)}async _render(){if(!le[this.cssPath]&&this.cssPath){let n=await this.fetchCSSAsStyleSheet();this._sDOM.adoptedStyleSheets=[n]}let c=this.render(this.props);return x(c)}async fetchHTMLAsDocFrag(){let r=await fetch(this.htmlPath);if(r.ok){let c=await r.text();return x(c)}throw new Error("Fetch failed")}async fetchCSSAsStyleSheet(){let r=new CSSStyleSheet,c=await fetch(this.cssPath);if(c.ok&&c.headers.get("content-type").indexOf("text/css")!==-1){let n=await c.text();await r.replace(n)}return r}async _renderHTMLFile(){let r=btoa(this.componentPath);H[r]||(H[r]=Promise.all([this.fetchHTMLAsDocFrag(),this.fetchCSSAsStyleSheet()]));let[c,n]=await H[r];return this._sDOM.adoptedStyleSheets=[n],c.cloneNode(!0)}componentDidMount(){}async connectedCallback(){this._sDOM=this.attachShadow({mode:"closed"});let r;this.render?r=await this._render():this.componentPath?r=await this._renderHTMLFile():console.error("No render function or component path found for static html/css."),this._sDOM.innerHTML=null,this._sDOM.appendChild(r),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.componentDidMount&&this.componentDidMount()})})}};function K(a,{name:r}={name:void 0}){let c="is"in a?a.is:a.prototype.constructor.name,n=r||F(c);return customElements.define(n,a),n}var k=[],j=new Map,T=new Map,P=new Map,L=new Map,q=new Map;function pe(a,{metaUrl:r,observedAttributes:c,kebabName:n}){return class extends HTMLElement{constructor(){super();this._postRender=void 0,this._propsChanged=void 0,this._hmrUpdate=!1,this._componentPath=r,document.addEventListener("esm-hmr:webact-function-component",()=>{this._hmrUpdate=!0,a=j.has(n)?j.get(n):a,this._render()})}set _html(e){if(!T.has(n)||this._hmrUpdate){let l=document.createElement("template");l.content.appendChild(e),T.set(n,l)}}get _html(){return T.has(n)?T.get(n).content.cloneNode(!0):null}set _css(e){(!P.has(n)||this._hmrUpdate)&&P.set(n,e)}get _css(){return P.has(n)?P.get(n):null}get cssPath(){return this._componentPath&&this._componentPath.replace(/\.(html|js)/gi,".css")}get htmlPath(){return this._componentPath&&this._componentPath.replace(/\.(css|js)/gi,".html")}static get observedAttributes(){return c}async _render(e){this._rendering=a.apply(this.customThis,[e]),this._rendering instanceof Promise&&await this._rendering,this._css?requestAnimationFrame(()=>{this._sDOM.adoptedStyleSheets=[this._css]}):console.warn(`<${n}>: Missing CSS. Will render without it.`),this._html?requestAnimationFrame(()=>this._sDOM.appendChild(this._html)):console.warn(`<${n}>: Missing HTML. Will render without it.`),this._postRender instanceof Function&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this._postRender(),this._hmrUpdate=!1})})}get customThis(){return{html:(e,...l)=>{if(!(this._html!==null&&this._hmrUpdate===!1))return this._html=V(e,...l),this._html},css:(e,...l)=>{if(!(this._css!==null&&this._hmrUpdate===!1))return this._css=Q(e,...l),this._css},useHTML:async e=>{if(q.has(n))return q.get(n);if(e=e||this.htmlPath,!e)return;e instanceof URL&&(e=e.toString());let m=(async()=>{let y=await(await fetch(e)).text();this.customThis.html([y])})();return q.set(n,m),m},useCSS:async e=>{if(L.has(n))return L.get(n);if(e=e||this.cssPath,!e)return;e instanceof URL&&(e=e.toString());let m=(async()=>{let y=await(await fetch(e)).text();this.customThis.css([y]),L.delete(n)})();return L.set(n,m),m},postRender:e=>{this._postRender=e},propsChanged:e=>{this._propsChanged=e},$:e=>e===void 0||e===":host"?this:e===":root"?this._sDOM:this._sDOM.querySelector(e),$$:e=>this._sDOM.querySelectorAll(e)}}async attributeChangedCallback(){await this._rendering,requestAnimationFrame(()=>{this._propsChanged instanceof Function?this._propsChanged(M(this.attributes)):console.error(`
            <${n}>: Attribute has changed and you are observing attributes, but not handling them in a propsChanged handler.
            Remove observedAttributes or or actually use them.
          `)})}async connectedCallback(){this._sDOM=this.attachShadow({mode:"closed"}),this._render(M(this.attributes))}}}function N(a,{metaUrl:r,observedAttributes:c,name:n}={metaUrl:void 0,observedAttributes:[],name:void 0}){let e=n||F(a.name);if(customElements.get(e))if(k.includes(e))j.set(e,a),document.dispatchEvent(new CustomEvent("esm-hmr:webact-function-component"));else throw new Error(`
        Some else has already registered <${e}> in the custom element registry.
      `);else{let l=pe(a,{metaUrl:r,observedAttributes:c,kebabName:e});customElements.define(e,l),k.push(e)}return e}export{X as Component,K as registerComponent,N as registerFunctionComponent};
//# sourceMappingURL=index.js.map
