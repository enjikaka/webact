function e(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,a){var i=t.apply(n,r);function s(t){e(i,o,a,s,c,"next",t)}function c(t){e(i,o,a,s,c,"throw",t)}s(void 0)}))}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a(e){return e?Array.from(e).reduce((e,t)=>{var o,{localName:a,value:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e,{[(o=a,o.replace(/(-)([a-z])/g,e=>e[1].toUpperCase()))]:i})},{}):{}}function i(e){return document.createRange().createContextualFragment(e)}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=Array.isArray(e)?e.reduce((e,t,r)=>e+(n[r]?t+n[r]:t),""):e,a=new CSSStyleSheet;return a.replace(o),a}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=Array.isArray(e)?e.reduce((e,t,r)=>e+(n[r]?t+n[r]:t),""):e;return i(o)}!function(){if(!("adoptedStyleSheets"in document)){var e="ShadyCSS"in window&&!window.ShadyCSS.nativeShadow,t=[],n=[],r=new WeakMap,o=new WeakMap,a=new WeakMap,i=new WeakMap,s=new WeakMap,c={loaded:!1},d={body:null,CSSStyleSheet:null},h=CSSStyleSheet,l=/@import/,u=["addImport","addPageRule","addRule","deleteRule","insertRule","removeImport","removeRule"],p=["replace","replaceSync"],f=function(){function e(){var e=document.createElement("style");c.loaded?d.body.appendChild(e):(document.head.appendChild(e),e.disabled=!0,t.push(e));var n=e.sheet;return o.set(n,{adopters:new Map,actions:[],basicStyleElement:e}),n}var n=e.prototype;return n.replace=function(e){var t=this;return new Promise((function(n,r){if(o.has(t)){var a=o.get(t).basicStyleElement;a.innerHTML=e,n(a.sheet),g(t)}else r(new Error("Failed to execute 'replace' on 'CSSStyleSheet': Can't call replace on non-constructed CSSStyleSheets."))}))},n.replaceSync=function(e){if(l.test(e))throw new Error("@import rules are not allowed when creating stylesheet synchronously");if(o.has(this)){var t=o.get(this).basicStyleElement;return t.innerHTML=e,g(this),t.sheet}throw new Error("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")},e}();Object.defineProperty(f,Symbol.hasInstance,{configurable:!0,value:m}),v(h.prototype),window.CSSStyleSheet=f,function(){var t={configurable:!0,get:function(){return r.get(this)||[]},set:function(e){var t=r.get(this)||[];!function(e,t){var n=t===document?"Document":"ShadowRoot";if(!Array.isArray(e))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Iterator getter is not callable.");if(!e.every(m))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Failed to convert value to 'CSSStyleSheet'");var o=e.filter((function(t,n){return e.indexOf(t)===n}));r.set(t,o)}(e,this);var n=this===document?y()?this.head:this.body:this,a="isConnected"in n?n.isConnected:document.body.contains(n);window.requestAnimationFrame((function(){a&&(b(n),function(e,t){for(var n=S(e),r=0,a=t.length;r<a;r++){if(n.indexOf(t[r])>-1)return;var s=o.get(t[r]).adopters,c=i.get(e),d=s.get(e);c.disconnect(),d.parentNode.removeChild(d),c.observe()}}(n,t))}),0)}};if(Object.defineProperty(Document.prototype,"adoptedStyleSheets",t),"undefined"!=typeof ShadowRoot){var n=HTMLElement.prototype.attachShadow;HTMLElement.prototype.attachShadow=function(){var t=e?this:n.apply(this,arguments);return C(t),t},Object.defineProperty(ShadowRoot.prototype,"adoptedStyleSheets",t)}}(),y()?document.addEventListener("DOMContentLoaded",M):M()}function m(e){return e instanceof h||e instanceof d.CSSStyleSheet}function y(){return"loading"===document.readyState}function S(e){return r.get(e.parentNode===document.documentElement?document:e)}function v(e){p.forEach((function(t){e[t]=function(){return f.prototype[t].apply(this,arguments)}})),u.forEach((function(t){var n=e[t];e[t]=function(){var e=arguments,r=n.apply(this,e);if(o.has(this)){var a=o.get(this),i=a.adopters,s=a.actions;i.forEach((function(n){n.sheet&&n.sheet[t].apply(n.sheet,e)})),s.push([t,e])}return r}}))}function g(e){var t=o.get(e),n=t.adopters,r=t.basicStyleElement;n.forEach((function(e){e.innerHTML=r.innerHTML}))}function b(e){for(var t=document.createDocumentFragment(),r=S(e),c=i.get(e),d=0,h=r.length;d<h;d++){var l=o.get(r[d]),u=l.adopters,p=l.basicStyleElement,f=u.get(e);f?(c.disconnect(),t.appendChild(f),(!f.innerHTML||f.sheet&&!f.sheet.cssText)&&(f.innerHTML=p.innerHTML),c.observe()):((f=document.createElement("style")).innerHTML=p.innerHTML,a.set(f,e),s.set(f,0),u.set(e,f),t.appendChild(f)),e===document.head&&n.push(f)}e.insertBefore(t,e.firstChild);for(var m=0,y=r.length;m<y;m++){var v=o.get(r[m]),g=v.adopters,b=v.actions,w=g.get(e),C=s.get(w);if(b.length>0){for(var M=C,_=b.length;M<_;M++){var P=b[M],O=P[0],E=P[1];w.sheet[O].apply(w.sheet,E)}s.set(w,b.length-1)}}}function w(t){for(var n=0,r=t.length;n<r;n++){for(var o=t[n],i=o.addedNodes,s=o.removedNodes,c=0,d=s.length;c<d;c++){var h=a.get(s[c]);h&&b(h)}if(!e)for(var l=0,u=i.length;l<u;l++)for(var p=document.createNodeIterator(i[l],NodeFilter.SHOW_ELEMENT,(function(e){return e.shadowRoot&&e.shadowRoot.adoptedStyleSheets.length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),null,!1),f=void 0;f=p.nextNode();)b(f.shadowRoot)}}function C(e){var t=new MutationObserver(w),n={observe:function(){t.observe(e,{childList:!0,subtree:!0})},disconnect:function(){t.disconnect()}};i.set(e,n),n.observe()}function M(){var e=document.createElement("iframe");e.hidden=!0,document.body.appendChild(e),d.body=e.contentWindow.document.body,d.CSSStyleSheet=e.contentWindow.CSSStyleSheet,v(e.contentWindow.CSSStyleSheet.prototype),C(document.body),c.loaded=!0;for(var r=document.createDocumentFragment(),o=0,a=t.length;o<a;o++)t[o].disabled=!1,r.appendChild(t[o]);d.body.appendChild(r);for(var i=0,s=n.length;i<s;i++)r.appendChild(n[i]);document.body.insertBefore(r,document.body.firstChild),t.length=0,n.length=0}}();var d={},h={};class l extends HTMLElement{constructor(e){super(),e?this.componentPath=e:(console.warn("You did not send a path to the super method in your constructor. Thus CSS and HTML cannot be read for this component.",this),console.warn("If shipping for modern browser, then call super with import.meta.url. If not, specify a path that is similar to import.meta.url yourself."),console.warn("Should be the path to the component you are making."))}$(e){return this._sDOM.querySelector(e)}get cssPath(){return this.componentPath&&this.componentPath.replace(/\.(html|js)/gi,".css")}get htmlPath(){return this.componentPath&&this.componentPath.replace(/\.(css|js)/gi,".html")}get props(){return a(this.attributes)}_render(){var e=this;return t((function*(){if(!h[e.cssPath]&&e.cssPath){var t=yield e.fetchCSSAsStyleSheet();e._sDOM.adoptedStyleSheets=[t]}return i(e.render(e.props))}))()}fetchHTMLAsDocFrag(){var e=this;return t((function*(){var t=yield fetch(e.htmlPath);if(t.ok)return i(yield t.text());throw new Error("Fetch failed")}))()}fetchCSSAsStyleSheet(){var e=this;return t((function*(){var t=new CSSStyleSheet,n=yield fetch(e.cssPath);if(n.ok&&-1!==n.headers.get("content-type").indexOf("text/css")){var r=yield n.text();yield t.replace(r)}return t}))()}_renderHTMLFile(){var e=this;return t((function*(){var t=btoa(e.componentPath);d[t]||(d[t]=Promise.all([e.fetchHTMLAsDocFrag(),e.fetchCSSAsStyleSheet()]));var[n,r]=yield d[t];return e._sDOM.adoptedStyleSheets=[r],n.cloneNode(!0)}))()}componentDidMount(){}connectedCallback(){var e=this;return t((function*(){var t;e._sDOM=e.attachShadow({mode:"closed"}),e.render?t=yield e._render():e.componentPath?t=yield e._renderHTMLFile():console.error("No render function or component path found for static html/css."),e._sDOM.innerHTML=null,e._sDOM.appendChild(t),requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.componentDidMount&&e.componentDidMount()})})}))()}}function u(e){var t=o("is"in e?e.is:e.prototype.constructor.name);return customElements.define(t,e),t}function p(e,n){var{metaUrl:r,observedAttributes:o}=n;return class extends HTMLElement{constructor(){super(),this._html=void 0,this._css=void 0,this._postRender=void 0,this._propsChanged=void 0,this._componentPath=r}get cssPath(){return this._componentPath&&this._componentPath.replace(/\.(html|js)/gi,".css")}get htmlPath(){return this._componentPath&&this._componentPath.replace(/\.(css|js)/gi,".html")}static get observedAttributes(){return o}_render(n){var r=this;return t((function*(){r._rendering=e.apply(r.customThis,[n]),r._rendering instanceof Promise&&(yield r._rendering),yield new Promise(e=>{r._css?requestAnimationFrame(()=>{r._sDOM.adoptedStyleSheets=[r._css]}):console.warn("Missing CSS. Will render without it."),r._html?requestAnimationFrame(()=>{r._sDOM.innerHTML=null,r._sDOM.appendChild(r._html),e()}):console.warn("Missing HTML. Will render without it."),e()}),requestAnimationFrame(()=>{r._postRender instanceof Function&&r._postRender()})}))()}get customThis(){var e,n,r=this;return{html:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r._html=c(e,...n),r._html},css:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r._css=s(e,...n),r._css},useHTML:(n=t((function*(e){if(e=e||r.htmlPath){e instanceof URL&&(e=e.toString());var t=yield fetch(e),n=yield t.text();return r.customThis.html([n])}})),function(e){return n.apply(this,arguments)}),useCSS:(e=t((function*(e){if(e=e||r.cssPath){e instanceof URL&&(e=e.toString());var t=yield fetch(e),n=yield t.text();return r.customThis.css([n])}})),function(t){return e.apply(this,arguments)}),postRender:e=>{this._postRender=e},propsChanged:e=>{this._propsChanged=e},$:e=>void 0===e?this:":host"===e?this._sDOM:this._sDOM.querySelector(e),$$:e=>this._sDOM.querySelectorAll(e)}}attributeChangedCallback(){var e=this;return t((function*(){yield e._render(a(e.attributes)),requestAnimationFrame(()=>{e._propsChanged instanceof Function&&e._propsChanged(a(e.attributes))})}))()}connectedCallback(){var e=this;return t((function*(){e._sDOM=e.attachShadow({mode:"closed"}),e._render(a(e.attributes))}))()}}}function f(e){var{metaUrl:t,observedAttributes:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{metaUrl:void 0,observedAttributes:[]},r=o(e.name);return customElements.define(r,p(e,{metaUrl:t,observedAttributes:n})),r}export{l as Component,u as registerComponent,f as registerFunctionComponent};
//# sourceMappingURL=index.bundled.js.map
